<%- include('../partials/header2.ejs'); %>
<link href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" rel="stylesheet">
<link href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-icons/1.5.0/font/bootstrap-icons.css" rel="stylesheet">
<script src="https://cdnjs.cloudflare.com/ajax/libs/lottie-web/5.7.6/lottie.min.js"></script>

<style>
    body {
        background: linear-gradient(to bottom, #6b78ff, #ffffff);
        font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        color: #333;
    }
    h1 {
        display: flex;
        align-items: center;
        justify-content: center;
        margin-bottom: 30px;
        font-size: 2.5rem;
        color: #ffffff;
        text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.2);
    }
    .page {
        background: rgba(255, 255, 255, 0.9);
        padding: 30px;
        border-radius: 10px;
        box-shadow: 0 8px 16px rgba(0, 0, 0, 0.1);
        margin-top: 200px !important;
    }
    .table th {
        background-color: #4e73df;
        color: #ffffff;
        text-align: center;
        font-weight: bold;
        border-top: none;
    }
    .table tbody tr {
        transition: all 0.3s ease;
    }
    .table tbody tr:hover {
        background-color: #f0f4ff;
        transform: scale(1.02);
        box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
    }
    .icon {
        margin-right: 8px;
    }
    .badge-status {
        font-size: 0.85rem;
        padding: 0.5em 0.7em;
        border-radius: 12px;
    }
    .badge-success {
        background-color: #28a745;
    }
    .badge-danger {
        background-color: #dc3545;
    }
    .icon-verde {
        color: #28a745;
        font-size: 1.2rem;
    }
    .icon-vermelho {
        color: #dc3545;
        font-size: 1.2rem;
    }
    .search-bar {
        margin-bottom: 20px;
    }
    .input-group {
        border-radius: 20px; /* Bordas arredondadas */
        overflow: hidden; /* Para manter as bordas arredondadas */
    }
    .form-control {
        border: 1px solid #6b78ff; /* Cor da borda */
        border-radius: 20px 0 0 20px; /* Bordas arredondadas à esquerda */
        box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1); /* Sombra sutil */
    }
    .form-control:focus {
        box-shadow: 0 0 8px rgba(107, 120, 255, 0.5); /* Efeito de foco */
        border-color: #6b78ff; /* Cor da borda em foco */
    }
    .btn-outline-secondary {
        border-radius: 0 20px 20px 0; /* Bordas arredondadas à direita */
        background-color: #6b78ff; /* Cor de fundo */
        color: #ffffff; /* Cor do texto */
    }
    .btn-outline-secondary:hover {
        background-color: #4e73df; /* Cor de fundo ao passar o mouse */
        border-color: #4e73df; /* Cor da borda ao passar o mouse */
    }
    .back-button {
        display: flex;
        align-items: center;
        margin-bottom: 20px;
    }
    .overlay {
        display: none; /* Inicialmente escondido */
        position: fixed;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background: rgba(0, 0, 0, 0.7);
        justify-content: center;
        align-items: center;
        z-index: 1000;
    }
    .animation {
        display: none; /* Inicialmente escondido */
        width: 100px; /* Ajuste o tamanho conforme necessário */
    }


.modal-content {
    background: #343a40; /* Cor de fundo do modal */
    border-radius: 8px;
    padding: 20px;
    text-align: center;
    width: 80%; /* Largura do modal */
    max-width: 500px; /* Largura máxima do modal */
}

.modal-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
}

.modal-title {
    margin: 0;
    color: #ffffff; /* Cor do título */
}

.modal-footer {
    display: flex;
    justify-content: center;
}

.btn-danger {
    background-color: #dc3545; /* Cor do botão Sim */
}

.btn-secondary {
    background-color: #6c757d; /* Cor do botão Não */
}

.animation-content {
    text-align: center;
    /* Fundo escuro para a animação */
    padding: 20px;
    border-radius: 8px;
    width: 500px;
    height: 500px;
    
}


















/* Estilo para o modal */
.modal-content {
    border-radius: 20px; /* Bordas arredondadas */
    box-shadow: 0 12px 70px rgba(0, 0, 0, 0.3); /* Sombra mais suave */
    background: linear-gradient(135deg, #e0e7ff, #ffffff); /* Gradiente suave no fundo */
    width: 95%; /* Aumentando a largura do modal */
    max-width: 1300px; /* Largura máxima para evitar que fique muito grande em telas maiores */
}

/* Definindo a altura máxima do modal para que não fique muito alto */
.modal-body {
    padding: 40px; /* Aumentar o espaçamento interno */
    display: flex; /* Usar flexbox para disposição em linha */
    align-items: flex-start; /* Alinhamento vertical ao topo */
    background: #ffffff; /* Fundo branco para o corpo do modal */
    border-radius: 20px; /* Bordas arredondadas no corpo */
    box-shadow: inset 0 0 20px rgba(0, 0, 0, 0.1); /* Sombra interna para dar profundidade */
}

/* Estilo da imagem do membro */
#modalFoto {
    border-radius: 20%; /* Bordas arredondadas para a imagem */
    border: 6px solid #6b78ff; /* Borda azul ao redor da imagem */
    box-shadow: 0 4px 30px rgba(0, 0, 0, 0.4); /* Sombra na imagem */
    margin-right: 40px; /* Aumentar o espaçamento à direita da imagem */
    width: 240px; /* Aumentar largura da imagem */
    height: 240px; /* Aumentar altura da imagem */
    transition: transform 0.3s; /* Transição suave na transformação */
}

/* Efeito de zoom ao passar o mouse sobre a imagem */
#modalFoto:hover {
    transform: scale(1.05); /* Aumenta a imagem ao passar o mouse */
}

/* Estilos para os campos de entrada */
.form-control {
    border-radius: 10px; /* Bordas arredondadas */
    border: 1px solid #6b78ff; /* Borda com cor azul */
    padding: 15px; /* Aumentar o espaçamento interno dos campos */
    font-size: 1.2rem; /* Aumentar o tamanho da fonte */
    background-color: #f9f9f9; /* Fundo claro para os campos */
    color: #333; /* Cor do texto */
    transition: border-color 0.3s, box-shadow 0.3s; /* Transição suave na borda */
}

/* Efeito ao focar nos campos */
.form-control:focus {
    border-color: #0056b3; /* Cor da borda ao focar */
    box-shadow: 0 0 5px rgba(105, 181, 255, 0.5); /* Sombra ao focar */
    outline: none; /* Remover contorno padrão */
}

/* Estilo dos labels */
label {
    font-weight: bold; /* Negrito nos rótulos */
    color: #333; /* Cor do texto dos rótulos */
    font-size: 1.4rem; /* Aumentar o tamanho da fonte dos rótulos */
    margin-bottom: 8px; /* Espaçamento abaixo dos rótulos */
    display: block; /* Fazer os labels ocuparem toda a largura */
}

/* Estilo do botão de salvar */
.btn-success {
    background-color: #6b78ff; /* Cor de fundo azul */
    border: none; /* Remover borda */
    border-radius: 10px; /* Bordas arredondadas */
    padding: 15px 30px; /* Aumentar o espaçamento interno */
    font-size: 1.4rem; /* Tamanho da fonte */
    font-weight: bold; /* Negrito */
    transition: background-color 0.3s, transform 0.3s; /* Transição suave */
    text-transform: uppercase; /* Transformar texto em maiúsculas */
    box-shadow: 0 4px 20px rgba(0, 0, 0, 0.2); /* Sombra para o botão */
}

/* Efeito ao passar o mouse sobre o botão de salvar */
.btn-success:hover {
    background-color: #0056b3; /* Cor de fundo mais escura ao passar o mouse */
    cursor: pointer; /* Cursor de ponteiro */
    transform: scale(1.05); /* Efeito de aumento ao passar o mouse */
}

/* Estilo do botão "Alterar Foto de Membro" */
.btn-alterar-foto {
    background-color: #ff6b6b; /* Cor de fundo vermelha */
    border: none; /* Remover borda */
    border-radius: 10px; /* Bordas arredondadas */
    padding: 15px 30px; /* Aumentar o espaçamento interno */
    font-size: 1.4rem; /* Tamanho da fonte */
    font-weight: bold; /* Negrito */
    transition: background-color 0.3s, transform 0.3s; /* Transição suave */
    text-transform: uppercase; /* Transformar texto em maiúsculas */
    box-shadow: 0 4px 20px rgba(0, 0, 0, 0.2); /* Sombra para o botão */
    display: flex; /* Usar flexbox para alinhar ícone e texto */
    align-items: center; /* Alinhar verticalmente */
}

/* Estilo do ícone dentro do botão "Alterar Foto de Membro" */
.btn-alterar-foto i {
    margin-right: 10px; /* Espaçamento à direita do ícone */
}

/* Efeito ao passar o mouse sobre o botão "Alterar Foto de Membro" */
.btn-alterar-foto:hover {
    background-color: #d9534f; /* Cor de fundo mais escura ao passar o mouse */
    cursor: pointer; /* Cursor de ponteiro */
    transform: scale(1.05); /* Efeito de aumento ao passar o mouse */
}

/* Estilo do modal header */
.modal-header {
    background-color: #6b78ff; /* Fundo azul para o cabeçalho */
    color: white; /* Texto branco no cabeçalho */
    border-top-left-radius: 20px; /* Bordas arredondadas */
    border-top-right-radius: 20px; /* Bordas arredondadas */
    padding: 25px; /* Aumentar o espaçamento interno do cabeçalho */
    font-size: 1.6rem; /* Tamanho da fonte do cabeçalho */
    text-align: center; /* Centralizar o texto do cabeçalho */
    box-shadow: 0 2px 10px rgba(0, 0, 0, 0.3); /* Sombra sob o cabeçalho */
}

/* Estilo para os ícones nos labels */
label i {
    color: #6b78ff; /* Cor dos ícones */
    margin-right: 5px; /* Espaçamento à direita do ícone */
}

/* Efeito de transição no modal */
.modal {
    transition: opacity 0.3s ease; /* Suave transição na opacidade do modal */
}

.modal.show {
    opacity: 1; /* Aumenta a opacidade quando o modal está visível */
}



</style>
</head>
<body>
    <div class="page container mt-5">
        <div class="back-button">
            <a href="javascript:history.back()" class="btn btn-link">
                <i class="bi bi-arrow-left icon"></i>
                Voltar
            </a>
        </div>
        <h1><i class="bi bi-people-fill icon"></i>Lista de Dizimistas</h1>
        <div class="search-bar mb-4">
            <div class="input-group">
                <input type="text" class="form-control" placeholder="Pesquisar por nome..." aria-label="Pesquisar" />
                <div class="input-group-append">
                    <button class="btn btn-outline-secondary" type="button">
                        <i class="bi bi-search"></i>
                    </button>
                </div>
            </div>
        </div>
        <table class="table table-bordered table-hover text-center">
            <thead>
                <tr>
                    <th><i class="bi bi-person-badge-fill icon"></i>Membro Número</th>
                    <th><i class="bi bi-person-fill icon"></i>Nome</th>
                    <th><i class="bi bi-gender-ambiguous icon"></i>Gênero</th>
                    <th><i class="bi bi-geo-alt-fill icon"></i>Província</th>
                    <th><i class="bi bi-calendar2-check-fill icon"></i>Tempo de Membrosia (meses)</th>
                    <th><i class="bi bi-flag-fill icon"></i>Status</th>
                    <th><i class="bi bi-calendar-event-fill icon"></i>Última Contribuição</th>
                    <th><i class="bi bi-currency-dollar icon"></i>Valor Total de Contribuições</th>
                    <th><i class="bi bi-currency-dollar icon"></i>Ações</th>
                </tr>
            </thead>
            <tbody>
                <% dizimistas.forEach(function(dizimista) { %>
                    <tr>
                        <td><%= dizimista.numero_membro %></td>
                        <td><%= dizimista.nome %></td>
                        <td><%= dizimista.genero %></td>
                        <td><%= dizimista.provincia %></td>
                        <td><%= dizimista.tempo_membresia %> meses</td>
                        <td>
                            <span class="badge badge-status <%= dizimista.status === 'Ativo' ? 'badge-success' : 'badge-danger' %>">
                                <%= dizimista.status %>
                            </span>
                        </td>
                        <td>
                            <% if (dizimista.ultima_contribuicao) { %>
                                <i class="bi bi-check-circle-fill icon-verde"></i> <%= new Date(dizimista.ultima_contribuicao).toLocaleDateString('pt-BR') %>
                            <% } else { %>
                                <i class="bi bi-x-circle-fill icon-vermelho"></i> Nunca Contribuiu
                            <% } %>
                        </td>
                        <td><%= dizimista.valor_total_contribuicoes %> Kz</td>
                        <td>
                            <button 
    class="btn btn-warning btn-sm" 
    onclick="abrirModalMembro(<%= dizimista.id %>)">
    Editar
</button>

                        

                            <button class="btn btn-danger btn-sm" onclick="confirmRemove(<%= dizimista.id %>)">Remover</button>
                        </td>
                    </tr>
                <% }); %>
            </tbody>
        </table>
    </div>


    <div class="modal fade" id="membroModal" tabindex="-1" role="dialog">
        <div class="modal-dialog modal-lg" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="modalTitulo">Editar Membro</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body d-flex align-items-start">
                    <img id="modalFoto" src="" alt="Foto do Membro" class="img-fluid rounded-circle">

                    <input type="hidden" class="form-control" id="membroId" />

                    <div class="form-container ml-4">
                        <div class="form-row">
                            <div class="form-group col-md-6">
                                <label><i class="bi bi-person-fill"></i> Nome:</label>
                                <input type="text" class="form-control" id="modalNome" />
                            </div>
                            <div class="form-group col-md-6">
                                <label><i class="bi bi-briefcase-fill"></i> Função:</label>
                                <input type="text" class="form-control" id="modalFuncao" />
                            </div>
                        </div>
                        <div class="form-row">
                            <div class="form-group col-md-4">
                                <label><i class="bi bi-tags-fill"></i> Categoria:</label>
                                <input type="text" class="form-control" id="modalCategoria" />
                            </div>
                            <div class="form-group col-md-4">
                                <label><i class="bi bi-info-circle-fill"></i> Situação:</label>
                                <input type="text" class="form-control" id="modalSituacao" />
                            </div>
                            <div class="form-group col-md-4">
                                <label><i class="bi bi-calendar-check-fill"></i>  Batismo:</label>
                                <input type="date" class="form-control" id="modalDataBatismo" />
                            </div>
                        </div>
                        <div class="form-row">
                            <div class="form-group col-md-6">
                                <label><i class="bi bi-geo-alt-fill"></i> Província:</label>
                                <input type="text" class="form-control" id="modalProvincia" />
                            </div>
                            <div class="form-group col-md-6">
                                <label><i class="bi bi-building"></i> Município:</label>
                                <input type="text" class="form-control" id="modalMunicipio" />
                            </div>
                        </div>
                        <div class="form-row">
                            <div class="form-group col-md-6">
                                <label><i class="bi bi-geo-fill"></i> Comuna:</label>
                                <input type="text" class="form-control" id="modalComuna" />
                            </div>
                        </div>

                        <div class="form-row">
                            <button type="button" class="btn-alterar-foto" onclick="document.getElementById('inputFoto').click()">
                                <i class="bi bi-camera"></i> Alterar Foto de Membro
                            </button>
                            <input type="file" id="inputFoto" accept="image/*" style="display: none;" onchange="previewFoto(event)" />
                        </div>
                        
                        
                        
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-success" id="salvarEdicoes" onclick="salvarEdicoes()">Salvar Edições</button>
                </div>
            </div>
        </div>
    </div>
    
    
    
    
    
    
    
    









<script>
    function previewFoto(event) {
    const file = event.target.files[0];
    if (file) {
        const reader = new FileReader();
        reader.onload = function (e) {
            document.getElementById('modalFoto').src = e.target.result; // Exibe a nova foto no modal
        };
        reader.readAsDataURL(file);
    }
}

</script>

<script>
    function previewFoto(event) {
    const file = event.target.files[0];
    const reader = new FileReader();
    
    reader.onload = function(e) {
        document.getElementById('modalFoto').src = e.target.result;
    };
    
    if (file) {
        reader.readAsDataURL(file);
    }
}

async function salvarEdicoes() {
    const membroId = document.getElementById('membroId').value; // Obtém o ID do membro
    const formData = new FormData();

    // Captura os dados do modal
    const nome = document.getElementById('modalNome').value;
    const funcao = document.getElementById('modalFuncao').value;
    const categoria = document.getElementById('modalCategoria').value;
    const situacao = document.getElementById('modalSituacao').value;
    const dataBatismo = document.getElementById('modalDataBatismo').value;
    const provincia = document.getElementById('modalProvincia').value;
    const municipio = document.getElementById('modalMunicipio').value;
    const comuna = document.getElementById('modalComuna').value;
    const fotoMembro = document.getElementById('inputFoto').files[0];

    // Adiciona os dados ao FormData
    formData.append('nome', nome);
    formData.append('funcao', funcao);
    formData.append('categoria', categoria);
    formData.append('situacao', situacao);
    formData.append('dataBatismo', dataBatismo);
    formData.append('provincia', provincia);
    formData.append('municipio', municipio);
    formData.append('comuna', comuna);
    if (fotoMembro) {
        formData.append('foto_membro', fotoMembro);
    }

    try {
        const response = await fetch(`/rota-para-atualizar-membro/${membroId}`, {
            method: 'PUT',
            body: formData
        });

        if (response.ok) {
            const result = await response.json();
            alert(result.message); // Mensagem de sucesso
            // Feche o modal ou atualize a interface como necessário
            $('#membroModal').modal('hide'); // Fecha o modal
            // Aqui você pode atualizar a lista de membros ou a interface conforme necessário
        } else {
            const errorData = await response.json();
            alert(`Erro: ${errorData.message}`); // Mensagem de erro
        }
    } catch (error) {
        console.error('Erro:', error);
        alert('Houve um problema ao salvar as edições.');
    }
}

</script>


<script>
    
    function abrirModalMembro(membroId) {
    // Faz uma requisição para buscar os dados do membro pelo ID
    fetch(`/rota-para-buscar-membro/${membroId}`)
        .then(response => response.json())
        .then(data => {
            if (data.membro) {
                document.getElementById('membroId').value = data.membro.id || '';
                document.getElementById('modalNome').value = data.membro.nome || '';
                document.getElementById('modalFuncao').value = data.dadosEclesiais.funcao || '';
                document.getElementById('modalCategoria').value = data.dadosEclesiais.categoria || '';
                document.getElementById('modalSituacao').value = data.dadosEclesiais.situacao || '';
                document.getElementById('modalDataBatismo').value = data.dadosEclesiais.dataBatismo 
                    ? new Date(data.dadosEclesiais.dataBatismo).toISOString().substring(0, 10) 
                    : '';
                document.getElementById('modalProvincia').value = data.endereco.provincia || '';
                document.getElementById('modalMunicipio').value = data.endereco.municipio || '';
                document.getElementById('modalComuna').value = data.endereco.comuna || '';

                // Ajusta o caminho da foto e define no modal
                const fotoPath = data.membro.foto_membro 
                   
                document.getElementById('modalFoto').src = fotoPath;

                // Mostra o modal
                $('#membroModal').modal('show');
            } else {
                alert('Erro ao carregar os dados do membro.');
            }
        })
        .catch(error => console.error('Erro ao buscar os dados do membro:', error));
}


</script>































































    <div class="overlay" id="confirmationOverlay">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title">Confirmação <i class="bi bi-question-circle"></i></h5>
                <button type="button" class="btn-close" aria-label="Close" onclick="closeModal()"></button>
            </div>
            <div class="modal-body text-center">
                <h5 style="color: #fff;">Tens certeza que pretendes eliminar este membro?</h5>
            </div>
            <div class="modal-footer justify-content-center">
                <button class="btn btn-danger" id="confirmRemoveButton">Sim <i class="bi bi-check-circle"></i></button>
                <button class="btn btn-secondary" id="cancelRemoveButton">Não <i class="bi bi-x-circle"></i></button>
            </div>
        </div>
    </div>
    
    <div class="overlay" id="animationOverlay">
        <div class="animation-content">
            <div id="lottieAnimation"></div>
        </div>
    </div>
 
    
    <!-- HTML para o modal -->
<div class="modal" id="membroModal" tabindex="-1" role="dialog">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="modalTitulo"></h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">
                <img id="modalFoto" src="" alt="Foto do Membro" class="img-fluid">
                <p><strong>Nome:</strong> <span id="modalNome"></span></p>
                <p><strong>Função:</strong> <span id="modalFuncao"></span></p>
                <p><strong>Categoria:</strong> <span id="modalCategoria"></span></p>
                <p><strong>Situação:</strong> <span id="modalSituacao"></span></p>
                <p><strong>Data de Batismo:</strong> <span id="modalDataBatismo"></span></p>
                <p><strong>Província:</strong> <span id="modalProvincia"></span></p>
                <p><strong>Município:</strong> <span id="modalMunicipio"></span></p>
                <p><strong>Comuna:</strong> <span id="modalComuna"></span></p>
            </div>
        </div>
    </div>
</div>


    <script>
        // Lottie Animation Setup
        const animation = lottie.loadAnimation({
            container: document.getElementById('lottieAnimation'), // Elemento DOM onde a animação será renderizada
            renderer: 'svg',
            loop: false,
            autoplay: false,
            path: '/img/delete.json' // Altere para o caminho da sua animação JSON
        });

        // Obtém os elementos da barra de pesquisa e da tabela
        const searchInput = document.querySelector('.search-bar input');
        const tableRows = document.querySelectorAll('tbody tr');

        // Adiciona um ouvinte de evento para a pesquisa
        searchInput.addEventListener('input', function() {
            const searchTerm = searchInput.value.toLowerCase(); // Obtém o termo de pesquisa
            tableRows.forEach(row => {
                const nome = row.cells[1].textContent.toLowerCase(); // Obtém o nome da célula correspondente
                row.style.display = nome.includes(searchTerm) ? '' : 'none'; // Exibe ou oculta a linha com base na pesquisa
            });
        });

        let memberIdToRemove = null; // Variável para armazenar o ID do membro a ser removido

        function confirmRemove(memberId) {
            memberIdToRemove = memberId; // Armazena o ID do membro
            document.getElementById('confirmationOverlay').style.display = 'flex'; // Mostra a sobreposição de confirmação
        }

        document.getElementById('confirmRemoveButton').addEventListener('click', function() {
            document.getElementById('confirmationOverlay').style.display = 'none'; // Oculta a sobreposição de confirmação
            document.getElementById('animationOverlay').style.display = 'flex'; // Mostra a sobreposição de animação
            document.getElementById('lottieAnimation').style.display = 'block'; // Mostra a animação
            animation.play(); // Reproduz a animação

            // Simula a remoção do membro após a animação
            animation.addEventListener('complete', function() {
                // Aqui você deve adicionar o código para remover o membro do servidor
                fetch(`/remover-membro/${memberIdToRemove}`, {
                    method: 'DELETE',
                    headers: {
                        'Content-Type': 'application/json'
                    }
                })
                .then(response => {
                    if (response.ok) {
                        window.location.reload(); // Atualiza a página se a remoção foi bem-sucedida
                    } else {
                        alert('Erro ao remover o membro. Tente novamente.');
                    }
                })
                .catch(error => {
                    console.error('Erro:', error);
                    alert('Erro ao remover o membro. Tente novamente.');
                });
            });
        });

        document.getElementById('cancelRemoveButton').addEventListener('click', function() {
            document.getElementById('confirmationOverlay').style.display = 'none'; // Oculta a sobreposição de confirmação
        });
    </script>
</body>
</html>


<!-- Script para abrir o modal -->
<script>
    function abrirModal(id) {
        fetch(`/ver-detalhes/${id}`)
            .then(response => response.json())
            .then(data => {
                document.getElementById('modalTitulo').innerText = data.nome;
                document.getElementById('modalFoto').src = data.foto_membro; // Altere para o caminho correto da foto
                document.getElementById('modalNome').innerText = data.nome;
                document.getElementById('modalFuncao').innerText = data.funcao;
                document.getElementById('modalCategoria').innerText = data.categoria;
                document.getElementById('modalSituacao').innerText = data.situacao;
                document.getElementById('modalDataBatismo').innerText = new Date(data.dataBatismo).toLocaleDateString('pt-BR');
                document.getElementById('modalProvincia').innerText = data.provincia;
                document.getElementById('modalMunicipio').innerText = data.municipio;
                document.getElementById('modalComuna').innerText = data.comuna;
                // Abre o modal
                $('#membroModal').modal('show');
            })
            .catch(error => {
                console.error('Erro ao buscar dados do membro:', error);
            });
    }
    </script>




<!-- Inclua estas bibliotecas se ainda não estiverem presentes -->
<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>

